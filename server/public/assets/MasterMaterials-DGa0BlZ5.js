import{_ as $,a as L}from"./UiParentCard.vue_vue_type_script_setup_true_lang-BW8k9qJX.js";import{O as d,_ as P,P as G,$ as m,q as W,o as Y,a as t,w as s,d as i,a0 as n,f as r,e as f,V as p,A as g,a1 as Z,b as u,a2 as C,F as j}from"./index-BkOgXO0r.js";import{B as q}from"./main-CfRLyuEJ.js";import{_ as K}from"./NewModal-C5NqQFOW.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"d-flex align-center mb-4"},X={class:"main-container"},ee={class:"list-container"},ae={class:"form-wrapper"},le={class:"add"},te={__name:"MasterMaterials",setup(oe){const b=Z,E=d({mode:"multiRow"}),N=new Date().toISOString().split("T")[0],a=d({matCode:"",matName:"",writer:"",date:N,size:"",safeQT:"",unit:"",type:"",note:""});P(()=>{c(),O(),S(),k()});const v=d([]),D=d([{field:"자재코드",width:140},{field:"자재명",width:140},{field:"자재유형",width:140},{field:"규격",width:140},{field:"안전재고",width:130},{field:"단위",width:130},{field:"작성자",width:130},{field:"등록일자",width:130},{field:"비고",width:130}]),R=d({title:"자재 관리"}),h=G([{title:"기준정보",disabled:!0,href:"#"},{title:"자재 관리",disabled:!1,href:"#"}]),U=l=>{console.log(l.value),console.log(v.value)},c=async()=>{const l=await m.get("http://localhost:3000/masterMatSelect");console.log(l),v.value=l.data.map(e=>({자재코드:e.MAT_CODE,자재명:e.MAT_NAME,자재유형:e.MAT_TYPE,규격:e.MAT_SIZE,단위:e.MAT_UNIT,안전재고:e.MAT_SAFEQT,작성자:e.MAT_WRITER,등록일자:e.MAT_DATE.substring(0,10),비고:e.MAT_NOTE}))},w=d([]),_=d([]),k=async()=>{const l=await m.get("http://localhost:3000/masterMatUnit");w.value=l.data.map(e=>e.code_name)},S=async()=>{const l=await m.get("http://localhost:3000/masterMatType");_.value=l.data.map(e=>e.code_name)},I=async()=>{if(console.log(!a.value.matCode),a.value.matCode){const l={MAT_NAME:a.value.matName,MAT_TYPE:a.value.type,MAT_UNIT:a.value.unit,MAT_SIZE:a.value.size,MAT_SAFEQT:a.value.safeQT,MAT_WRITER:a.value.writer,MAT_DATE:a.value.date,MAT_NOTE:a.value.note,MAT_CODE:a.value.matCode},e=await m.post("http://localhost:3000/masterMatUpdate",l);console.log(e.config.data),c()}else{if(!a.value.safeQT||!a.value.type){alert("값을 올바르게 기재하십시오.");return}const l={MAT_NAME:a.value.matName,MAT_TYPE:a.value.type,MAT_UNIT:a.value.unit,MAT_SIZE:a.value.size,MAT_SAFEQT:a.value.safeQT,MAT_WRITER:a.value.writer,MAT_DATE:a.value.date,MAT_NOTE:a.value.note},e=await m.post("http://localhost:3000/masterMatInsert",l);console.log(e.config.data),c()}},Q=()=>{a.value={empName:"",addDate:"",empNo:"",diagram:""}},x=l=>{a.value.matCode=l.data.자재코드,a.value.matName=l.data.자재명,a.value.writer=l.data.작성자,a.value.date=l.data.등록일자,a.value.safeQT=l.data.안전재고,a.value.size=l.data.규격,a.value.unit=l.data.단위,a.value.type=l.data.자재유형,a.value.note=l.data.비고},T=d(null),M=d(""),V=d([]),y=d([]),z=[{field:"그룹코드",headerName:"그룹코드",flex:1},{field:"규격",headerName:"규격",flex:1},{field:"사용유무",headerName:"사용유무",flex:1}],A=d([]),O=async()=>{const l=await m.get("http://localhost:3000/masterMatModal");A.value=l.data.map(e=>({그룹코드:e.group_code,규격:e.code_name,사용유무:e.use_yn})),console.log(l)},F=async(l,e,o)=>{M.value=l,V.value=e,y.value=o,T.value&&T.value.open()},B=async l=>{a.value.size=l.규격};return(l,e)=>(Y(),W(j,null,[t($,{title:R.value.title,breadcrumbs:h.value},null,8,["title","breadcrumbs"]),t(L,{title:"자재 목록"},{default:s(()=>[i("div",J,[t(n,{label:"자재 검색",modelValue:l.searchKeyword,"onUpdate:modelValue":e[0]||(e[0]=o=>l.searchKeyword=o),"hide-details":"",class:"mr-2",style:{"max-width":"280px"}},null,8,["modelValue"]),t(r,{color:"darkText",onClick:l.searchData},{default:s(()=>e[11]||(e[11]=[f("검색")])),_:1},8,["onClick"]),t(p,{justify:"end",class:"mr-3"},{default:s(()=>[t(r,{color:"error",class:"mr-1",onClick:l.del},{default:s(()=>e[12]||(e[12]=[f("삭제")])),_:1},8,["onClick"])]),_:1})]),i("div",X,[i("div",ee,[t(g(q),{rowData:v.value,columnDefs:D.value,theme:g(b),style:{height:"500px",width:"100%"},onCellValueChanged:U,rowSelection:E.value,onRowClicked:x,onGridReady:l.onGridReadyMat},null,8,["rowData","columnDefs","theme","rowSelection","onGridReady"])]),i("div",ae,[i("div",le,[t(p,{class:"mb-4"},{default:s(()=>[t(u,{cols:"6"},{default:s(()=>[t(n,{label:"자재코드",modelValue:a.value.matCode,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.matCode=o),readonly:"true",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(u,{cols:"6"},{default:s(()=>[t(n,{label:"자재명",modelValue:a.value.matName,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.matName=o),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(u,{cols:"6"},{default:s(()=>[t(n,{label:"작성자",modelValue:a.value.writer,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.writer=o),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(u,{cols:"6"},{default:s(()=>[t(n,{label:"등록일자",modelValue:a.value.date,"onUpdate:modelValue":e[4]||(e[4]=o=>a.value.date=o),type:"date",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(u,{cols:"6"},{default:s(()=>[t(n,{label:"규격",modelValue:a.value.size,"onUpdate:modelValue":e[6]||(e[6]=o=>a.value.size=o),placeholder:"규격",dense:"",outlined:"",readonly:""},{"append-inner":s(()=>[i("i",{class:"fa-solid fa-magnifying-glass",style:{cursor:"pointer","font-size":"large","margin-right":"0.5rem"},onClick:e[5]||(e[5]=o=>F("자재 규격 조회",A.value,z))})]),_:1},8,["modelValue"]),t(K,{ref_key:"modalRef",ref:T,title:M.value,rowData:V.value,colDefs:y.value,onConfirm:B},null,8,["title","rowData","colDefs"])]),_:1}),t(u,{cols:"6"},{default:s(()=>[t(n,{label:"안전재고",modelValue:a.value.safeQT,"onUpdate:modelValue":e[7]||(e[7]=o=>a.value.safeQT=o),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(u,{cols:"6"},{default:s(()=>[t(C,{label:"단위",modelValue:a.value.unit,"onUpdate:modelValue":e[8]||(e[8]=o=>a.value.unit=o),items:w.value,dense:"",outlined:""},null,8,["modelValue","items"])]),_:1}),t(u,{cols:"6"},{default:s(()=>[t(C,{label:"자재유형",modelValue:a.value.type,"onUpdate:modelValue":e[9]||(e[9]=o=>a.value.type=o),items:_.value,dense:"",outlined:""},null,8,["modelValue","items"])]),_:1}),t(u,{cols:"12"},{default:s(()=>[t(n,{label:"비고",modelValue:a.value.note,"onUpdate:modelValue":e[10]||(e[10]=o=>a.value.note=o),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(p,{justify:"center"},{default:s(()=>[t(r,{color:"error",class:"mr-3",onClick:Q},{default:s(()=>e[13]||(e[13]=[f("초기화")])),_:1}),t(r,{color:"primary",class:"mr-6",onClick:I},{default:s(()=>e[14]||(e[14]=[f("저장")])),_:1})]),_:1})]),_:1})]),e[15]||(e[15]=i("br",null,null,-1))])])]),_:1})],64))}},me=H(te,[["__scopeId","data-v-cfa7f689"]]);export{me as default};
