import{x as h,aZ as B,a_ as M,b0 as F,O as i,P as O,a8 as E,y as j,_ as k,q as L,a as t,w as o,F as P,$ as I,o as c,d as U,c as q,k as H,V as f,b as d,a0 as p,a2 as Q,f as b,e as y,aU as $,A as v,a1 as J}from"./index-BkOgXO0r.js";import{_ as K,a as W}from"./UiParentCard.vue_vue_type_script_setup_true_lang-BW8k9qJX.js";import{B as Y}from"./main-CfRLyuEJ.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G=h({__name:"MaterialListHistory",setup(X){B.registerModules([M,F]);const _=J,N=i({title:"원자재검수이력조회"}),g=O([{title:"품질",disabled:!0,href:"#"},{title:"원자재검수이력조회",disabled:!1,href:"#"}]),l=E({materialName:"",status:"",inspector:""}),n=i([]),u=i(!1),T=i([{label:"합격",value:"합격"},{label:"불합격",value:"불합격"}]),V=j(()=>{const a=l.materialName.trim().toLowerCase(),e=l.status,r=l.inspector;return n.value.filter(s=>{const D=!a||s.materialCode.toLowerCase().includes(a),R=s.rjtReason&&s.rjtReason.trim()!==""?"불합격":"합격",A=!e||R===e,w=!r||s.createdBy&&s.createdBy>=r;return D&&A&&w}).map(s=>({...s,status:s.rjtReason&&s.rjtReason.trim()!==""?"불합격":"합격"}))}),C=i([{headerName:"검사번호",field:"inspectionNo",flex:1,resizable:!0,suppressSizeToFit:!0},{headerName:"입고번호",field:"receiptNo",flex:1,resizable:!0,suppressSizeToFit:!0},{headerName:"원자재코드",field:"materialCode",flex:1,resizable:!0,suppressSizeToFit:!0},{headerName:"총수량",field:"qty",flex:1,resizable:!0,suppressSizeToFit:!0},{headerName:"처리상태",field:"status",flex:1,resizable:!0,suppressSizeToFit:!0,cellRenderer:a=>a.value||"-"},{headerName:"검사완료일자",field:"createdBy",flex:1,resizable:!0,cellRenderer:a=>a.value?new Date(a.value).toISOString().split("T")[0]:"-"},{headerName:"불합격사유",field:"rjtReason",flex:1,resizable:!0,suppressSizeToFit:!0}]),z=i({defaultColDef:{flex:1,minWidth:100,resizable:!0},pagination:!0,paginationAutoPageSize:!0,paginationPageSizeSelector:!0}),m=async()=>{try{u.value=!0;const a=await I.get("http://localhost:3000/mathisall");console.log("result data는 => ",a.data),a.data&&Array.isArray(a.data)?n.value=a.data.map(e=>({inspectionNo:e.MAT_CERT_ID||"",receiptNo:e.RECEIPT_NO||"",materialCode:e.MAT_CODE||"",qty:Number(e.TOTAL_QTY)||0,status:e.MAT_STATUS||"",createdBy:e.Q_CHECKED_DATE||"",rjtReason:e.RJT_REASON||""})):n.value=[]}catch(a){console.error("데이터 조회 중 오류 발생:",a),n.value=[]}finally{u.value=!1}};function S(){l.materialName="",l.status="",l.inspector=""}function x(){m()}return k(async()=>{await m()}),(a,e)=>(c(),L(P,null,[t(K,{title:N.value.title,breadcrumbs:g.value},null,8,["title","breadcrumbs"]),t(W,null,{default:o(()=>[t(f,{class:"mb-4"},{default:o(()=>[t(d,{cols:"3"},{default:o(()=>[t(p,{label:"원자재명",modelValue:l.materialName,"onUpdate:modelValue":e[0]||(e[0]=r=>l.materialName=r),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"3"},{default:o(()=>[t(Q,{label:"처리상태",modelValue:l.status,"onUpdate:modelValue":e[1]||(e[1]=r=>l.status=r),items:T.value,"item-title":"label","item-value":"value",dense:"",outlined:""},null,8,["modelValue","items"])]),_:1}),t(d,{cols:"3"},{default:o(()=>[t(p,{label:"검사완료일자",modelValue:l.inspector,"onUpdate:modelValue":e[2]||(e[2]=r=>l.inspector=r),type:"date",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(f,{justify:"end"},{default:o(()=>[t(b,{color:"primary",variant:"elevated",onClick:x,class:"mr-2"},{default:o(()=>e[3]||(e[3]=[y("조회")])),_:1}),t(b,{color:"error",variant:"elevated",onClick:S},{default:o(()=>e[4]||(e[4]=[y("초기화")])),_:1})]),_:1})]),_:1}),e[5]||(e[5]=U("br",null,null,-1)),u.value?(c(),q($,{key:0,indeterminate:"",color:"primary"})):H("",!0),t(v(Y),{rowData:V.value,columnDefs:C.value,theme:v(_),gridOptions:z.value,style:{height:"400px"}},null,8,["rowData","columnDefs","theme","gridOptions"])]),_:1})],64))}}),se=Z(G,[["__scopeId","data-v-eced40e5"]]);export{se as default};
