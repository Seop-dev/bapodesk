import{_ as U,a as h}from"./UiParentCard.vue_vue_type_script_setup_true_lang-BW8k9qJX.js";import{O as i,_ as k,P as z,$ as r,q as S,o as O,a as t,w as s,d as u,a0 as n,f as m,e as p,V as w,A as V,a1 as A,b as d,a2 as P,F as M}from"./index-BkOgXO0r.js";import{B}from"./main-CfRLyuEJ.js";import{_ as F}from"./NewModal-C5NqQFOW.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"d-flex align-center mb-4"},Y={class:"main-container"},Z={class:"list-container"},j={class:"form-wrapper"},q={class:"add"},K={__name:"MasterWIP",setup(Q){const W=A,_=i({mode:"multiRow"}),b=new Date().toISOString().split("T")[0],l=i({wipCode:"",wipName:"",writer:"",date:b,size:"",unit:"",type:"",note:""});k(()=>{f(),D(),E()});const v=i([]),C=i([{field:"재공품코드",editable:!0,width:130},{field:"재공품명",width:130,editable:!0},{field:"재공품유형",width:130,editable:!0},{field:"규격",width:110,editable:!0},{field:"단위",width:110,editable:!0},{field:"작성자",width:110,editable:!0},{field:"등록일자",width:110,editable:!0}]),y=i({title:"재공품 관리"}),g=z([{title:"기준정보",disabled:!0,href:"#"},{title:"재공품 관리",disabled:!1,href:"#"}]),f=async()=>{const a=await r.get("http://localhost:3000/masterWIPSelect");console.log(a),v.value=a.data.map(e=>({재공품코드:e.WIP_CODE,재공품명:e.WIP_NAME,재공품유형:e.WIP_TYPE,규격:e.WIP_SIZE,단위:e.WIP_UNIT,작성자:e.WIP_WRITER,등록일자:e.WIP_DATE.substring(0,10),비고:e.WIP_NOTE}))},c=i([]),I=i([]),D=async()=>{const a=await r.get("http://localhost:3000/masterWIPUnit");c.value=a.data.map(e=>e.code_name)},E=async()=>{const a=await r.get("http://localhost:3000/masterWIPType");I.value=a.data.map(e=>e.code_name)},N=async()=>{if(console.log(!l.value.wipCode),l.value.wipCode){const a={WIP_NAME:l.value.wipName,WIP_TYPE:l.value.type,WIP_UNIT:l.value.unit,WIP_SIZE:l.value.size,WIP_DATE:l.value.date,WIP_NOTE:l.value.note,WIP_WRITER:l.value.writer,WIP_CODE:l.value.wipCode},e=await r.post("http://localhost:3000/masterWIPUpdate",a);console.log(e.config.data),f()}else{if(!l.value.type||!l.value.wipName||!l.value.size){alert("값을 올바르게 기재하십시오.");return}const a={WIP_NAME:l.value.wipName,WIP_TYPE:l.value.type,WIP_UNIT:l.value.unit,WIP_SIZE:l.value.size,WIP_DATE:l.value.date,WIP_NOTE:l.value.note,WIP_WRITER:l.value.writer},e=await r.post("http://localhost:3000/masterWIPInsert",a);console.log(e.config.data),f()}},T=()=>{l.value={empName:"",addDate:"",empNo:"",diagram:""}},R=a=>{l.value.wipCode=a.data.재공품코드,l.value.wipName=a.data.재공품명,l.value.writer=a.data.작성자,l.value.date=a.data.등록일자,l.value.size=a.data.규격,l.value.unit=a.data.단위,l.value.type=a.data.재공품유형,l.value.note=a.data.비고};return(a,e)=>(O(),S(M,null,[t(U,{title:y.value.title,breadcrumbs:g.value},null,8,["title","breadcrumbs"]),t(h,{title:"재공품 목록"},{default:s(()=>[u("div",L,[t(n,{label:"재공품 검색",modelValue:a.searchKeyword,"onUpdate:modelValue":e[0]||(e[0]=o=>a.searchKeyword=o),"hide-details":"",class:"mr-2",style:{"max-width":"280px"}},null,8,["modelValue"]),t(m,{color:"darkText",onClick:a.searchData},{default:s(()=>e[10]||(e[10]=[p("검색")])),_:1},8,["onClick"]),t(w,{justify:"end",class:"mr-3"},{default:s(()=>[t(m,{color:"error",class:"mr-1",onClick:a.del},{default:s(()=>e[11]||(e[11]=[p("삭제")])),_:1},8,["onClick"])]),_:1})]),u("div",Y,[u("div",Z,[t(V(B),{rowData:v.value,columnDefs:C.value,theme:V(W),style:{height:"500px",width:"100%"},onCellValueChanged:a.onCellValueChanged,rowSelection:_.value,onRowClicked:R},null,8,["rowData","columnDefs","theme","onCellValueChanged","rowSelection"])]),u("div",j,[u("div",q,[t(w,{class:"mb-4"},{default:s(()=>[t(d,{cols:"6"},{default:s(()=>[t(n,{label:"재공품코드",modelValue:l.value.wipCode,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.wipCode=o),readonly:"true",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"6"},{default:s(()=>[t(n,{label:"재공품명",modelValue:l.value.wipName,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.wipName=o),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"6"},{default:s(()=>[t(n,{label:"작성자",modelValue:l.value.writer,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.writer=o),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"6"},{default:s(()=>[t(n,{label:"등록일자",modelValue:l.value.date,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.date=o),type:"date",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"6"},{default:s(()=>[t(P,{label:"단위",modelValue:l.value.unit,"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.unit=o),items:c.value,dense:"",outlined:""},null,8,["modelValue","items"])]),_:1}),t(d,{cols:"6"},{default:s(()=>[t(P,{label:"재공품유형",modelValue:l.value.type,"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.type=o),items:I.value,dense:"",outlined:""},null,8,["modelValue","items"])]),_:1}),t(d,{cols:"12"},{default:s(()=>[t(n,{label:"규격",modelValue:l.value.size,"onUpdate:modelValue":e[8]||(e[8]=o=>l.value.size=o),placeholder:"규격",dense:"",outlined:"",readonly:""},{"append-inner":s(()=>[u("i",{class:"fa-solid fa-magnifying-glass",style:{cursor:"pointer","font-size":"large","margin-right":"0.5rem"},onClick:e[7]||(e[7]=o=>a.openModal("재공품 규격 조회",a.materialRowData,a.materialColDefs))})]),_:1},8,["modelValue"]),t(F,{ref:"modalRef",title:a.modalTitle,rowData:a.modalRowData,colDefs:a.modalColDefs,onConfirm:a.modalConfirm},null,8,["title","rowData","colDefs","onConfirm"])]),_:1}),t(d,{cols:"12"},{default:s(()=>[t(n,{label:"비고",modelValue:l.value.note,"onUpdate:modelValue":e[9]||(e[9]=o=>l.value.note=o),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(w,{justify:"center"},{default:s(()=>[t(m,{color:"error",class:"mr-3",onClick:T},{default:s(()=>e[12]||(e[12]=[p("초기화")])),_:1}),t(m,{color:"primary",class:"mr-6",onClick:N},{default:s(()=>e[13]||(e[13]=[p("저장")])),_:1})]),_:1})]),_:1})]),e[14]||(e[14]=u("br",null,null,-1))])])]),_:1})],64))}},ee=$(K,[["__scopeId","data-v-fae7e98b"]]);export{ee as default};
