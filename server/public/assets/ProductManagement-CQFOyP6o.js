import{aZ as w,a_ as v,O as r,P as N,y as V,_ as D,q as S,o as x,a,w as s,d as k,V as l,b as q,a0 as C,f as B,e as R,A as d,a1 as A,F as M,$ as z,H as F}from"./index-BkOgXO0r.js";import{_ as O,a as P}from"./UiParentCard.vue_vue_type_script_setup_true_lang-BW8k9qJX.js";import{B as T}from"./main-CfRLyuEJ.js";const G={__name:"ProductManagement",setup($){w.registerModules([v]);const u=A,c=F(),f=r({title:"제품검사성적서 관리"}),m=N([{title:"품질",disabled:!0,href:"#"},{title:"제품성적서관리",disabled:!1,href:"#"}]),o=r({finished_at:""}),_=r([{headerName:"지시번호",field:"wo_no"},{headerName:"제품코드",field:"product_code"},{headerName:"제품명",field:"product_name"},{headerName:"제품유형",field:"product_type"},{headerName:"총생산량",field:"qty"},{headerName:"지시상태",field:"status"},{headerName:"작업자",field:"writer"},{headerName:"생산완료일자",field:"finished_at"}]),i=r([]),p=async()=>{try{const{data:t}=await z.get("http://localhost:3000/taskprd");i.value=Array.isArray(t)?t:[]}catch(t){console.error("데이터 로드 실패:",t),i.value=[]}},h=V(()=>{const t=(o.value.finished_at||"").trim();return i.value.map(e=>({...e,finished_at:e.finished_at?String(e.finished_at).substring(0,10):""})).filter(e=>!t||e.finished_at.startsWith(t))}),g=r({defaultColDef:{flex:1,minWidth:100,resizable:!0},pagination:!0,paginationAutoPageSize:!0}),y=t=>{const e=t.data;c.push({path:"/qm/prdmngcert",query:{wo_no:String(e.wo_no),product_code:String(e.product_code||""),product_name:String(e.product_name||""),product_type:String(e.product_type||""),qty:String(e.qty||0),writer:String(e.writer||""),finished_at:String(e.finished_at||"")}})},b=()=>{o.value.finished_at=""};return D(()=>{p()}),(t,e)=>(x(),S(M,null,[a(O,{title:f.value.title,breadcrumbs:m.value},null,8,["title","breadcrumbs"]),a(P,null,{default:s(()=>[a(l,{class:"mb-4"},{default:s(()=>[a(q,{cols:"3"},{default:s(()=>[a(C,{label:"생산완료일자",modelValue:o.value.finished_at,"onUpdate:modelValue":e[0]||(e[0]=n=>o.value.finished_at=n),type:"date",dense:"",outlined:""},null,8,["modelValue"])]),_:1})]),_:1}),a(l,{justify:"end",class:"mb-4"},{default:s(()=>[a(B,{color:"error",variant:"elevated",onClick:b},{default:s(()=>e[1]||(e[1]=[R("초기화")])),_:1})]),_:1}),e[2]||(e[2]=k("br",null,null,-1)),a(d(T),{rowData:h.value,columnDefs:_.value,theme:d(u),gridOptions:g.value,onRowClicked:y,style:{height:"400px"}},null,8,["rowData","columnDefs","theme","gridOptions"])]),_:1})],64))}};export{G as default};
