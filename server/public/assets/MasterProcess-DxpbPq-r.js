import{_ as O,a as B}from"./UiParentCard.vue_vue_type_script_setup_true_lang-BW8k9qJX.js";import{O as d,P as F,_ as I,$ as i,q as S,o as $,a as t,w as s,d as r,a0 as n,f as m,e as c,V as v,A as y,a1 as z,b as u,F as W}from"./index-BkOgXO0r.js";import{B as Y}from"./main-CfRLyuEJ.js";import{_ as j}from"./NewModal-C5NqQFOW.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"d-flex align-center mb-4"},L={class:"main-container"},Q={class:"list-container"},G={class:"form-wrapper"},H={class:"add"},J={__name:"MasterProcess",setup(X){const b=z,P=d({mode:"multiRow"}),g=new Date().toISOString().split("T")[0],l=d({prcCode:"",prcName:"",writer:"",date:g,type:"",note:""}),C=d([]),D=d([{field:"공정코드",editable:!0,width:140},{field:"공정명",width:140,editable:!0},{field:"설비유형",width:140,editable:!0},{field:"작성자",width:130,editable:!0},{field:"등록일자",width:130,editable:!0},{field:"비고",width:130,editable:!0}]),N=d({title:"공정 관리"}),E=F([{title:"기준정보",disabled:!0,href:"#"},{title:"공정 관리",disabled:!1,href:"#"}]),f=async()=>{const a=await i.get("http://localhost:3000/masterPrcSelect");console.log(a),C.value=a.data.map(e=>({공정코드:e.PRC_CODE,공정명:e.PRC_NAME,설비유형:e.FAC_TYPE,작성자:e.PRC_WRITER,등록일자:e.PRC_RDATE.substring(0,10),비고:e.PRC_NOTE}))};I(()=>{f(),A()});const T=async()=>{if(console.log(!l.value.prcCode),l.value.prcCode){const a={PRC_NAME:l.value.prcName,PRC_TYPE:l.value.type,PRC_WRITER:l.value.writer,PRC_DATE:l.value.date,PRC_NOTE:l.value.note,PRC_CODE:l.value.prcCode},e=await i.post("http://localhost:3000/masterPrcUpdate",a);console.log(e.config.data),await f()}else{if(!l.value.type){alert("값을 올바르게 기재하십시오.");return}const a={PRC_NAME:l.value.prcName,PRC_TYPE:l.value.type,PRC_WRITER:l.value.writer,PRC_DATE:l.value.date,PRC_NOTE:l.value.note},e=await i.post("http://localhost:3000/masterPrcInsert",a);console.log(e.config.data),await f()}},h=()=>{l.value={prcCode:"",prcName:"",note:"",date:"",type:""}},k=a=>{l.value.prcCode=a.data.공정코드,l.value.prcName=a.data.공정명,l.value.writer=a.data.작성자,l.value.date=a.data.등록일자,l.value.type=a.data.설비유형,l.value.note=a.data.비고},p=d(null),w=d(""),_=d([]),R=d([]),x=[{field:"그룹코드",headerName:"그룹코드",flex:1},{field:"설비유형",headerName:"설비유형",flex:1},{field:"사용유무",headerName:"사용유무",flex:1}],V=d([]),A=async()=>{const a=await i.get("http://localhost:3000/masterPrcModal");V.value=a.data.map(e=>({그룹코드:e.group_code,설비유형:e.code_name,사용유무:e.use_yn})),console.log(a)},M=async(a,e,o)=>{w.value=a,_.value=e,R.value=o,p.value&&p.value.open()},U=async a=>{l.value.type=a.설비유형};return(a,e)=>($(),S(W,null,[t(O,{title:N.value.title,breadcrumbs:E.value},null,8,["title","breadcrumbs"]),t(B,{title:"공정 목록"},{default:s(()=>[r("div",K,[t(n,{label:"공정 검색",modelValue:a.searchKeyword,"onUpdate:modelValue":e[0]||(e[0]=o=>a.searchKeyword=o),"hide-details":"",class:"mr-2",style:{"max-width":"280px"}},null,8,["modelValue"]),t(m,{color:"darkText",onClick:a.searchData},{default:s(()=>e[8]||(e[8]=[c("검색")])),_:1},8,["onClick"]),t(v,{justify:"end",class:"mr-3"},{default:s(()=>[t(m,{color:"error",class:"mr-1",onClick:a.del},{default:s(()=>e[9]||(e[9]=[c("삭제")])),_:1},8,["onClick"])]),_:1})]),r("div",L,[r("div",Q,[t(y(Y),{rowData:C.value,columnDefs:D.value,theme:y(b),style:{height:"500px",width:"100%"},onCellValueChanged:a.onCellValueChanged,rowSelection:P.value,onRowClicked:k},null,8,["rowData","columnDefs","theme","onCellValueChanged","rowSelection"])]),r("div",G,[r("div",H,[t(v,{class:"mb-4"},{default:s(()=>[t(u,{cols:"6"},{default:s(()=>[t(n,{label:"공정코드",modelValue:l.value.prcCode,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.prcCode=o),readonly:"true",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(u,{cols:"6"},{default:s(()=>[t(n,{label:"공정명",modelValue:l.value.prcName,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.prcName=o),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(u,{cols:"6"},{default:s(()=>[t(n,{label:"작성자",modelValue:l.value.writer,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.writer=o),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(u,{cols:"6"},{default:s(()=>[t(n,{label:"등록일자",modelValue:l.value.date,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.date=o),type:"date",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(u,{cols:"6"},{default:s(()=>[t(n,{label:"설비유형",modelValue:l.value.type,"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.type=o),dense:"",outlined:"",readonly:""},{"append-inner":s(()=>[r("i",{class:"fa-solid fa-magnifying-glass",style:{cursor:"pointer","font-size":"large","margin-right":"0.5rem"},onClick:e[5]||(e[5]=o=>M("설비 조회",V.value,x))})]),_:1},8,["modelValue"]),t(j,{ref_key:"modalRef",ref:p,title:w.value,rowData:_.value,colDefs:R.value,onConfirm:U},null,8,["title","rowData","colDefs"])]),_:1}),t(u,{cols:"4"}),t(u,{cols:"12"},{default:s(()=>[t(n,{label:"비고",modelValue:l.value.note,"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.note=o),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(v,{justify:"center"},{default:s(()=>[t(m,{color:"error",class:"mr-3",onClick:h},{default:s(()=>e[10]||(e[10]=[c("초기화")])),_:1}),t(m,{color:"primary",class:"mr-6",onClick:T},{default:s(()=>e[11]||(e[11]=[c("저장")])),_:1})]),_:1})]),_:1})]),e[12]||(e[12]=r("br",null,null,-1))])])]),_:1})],64))}},oe=q(J,[["__scopeId","data-v-9afe5e8c"]]);export{oe as default};
