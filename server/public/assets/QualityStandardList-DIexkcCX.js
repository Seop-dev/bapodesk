import{aZ as S,a_ as C,O as r,P as R,_ as L,a7 as A,q as B,o as O,a as l,w as d,d as f,V as T,b as m,a0 as E,aN as F,a2 as M,f as y,e as _,A as v,a1 as z,F as q,$ as Q}from"./index-BkOgXO0r.js";import{_ as G,a as U}from"./UiParentCard.vue_vue_type_script_setup_true_lang-BW8k9qJX.js";import{B as $}from"./main-CfRLyuEJ.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"toolbar"},P={class:"filters"},W={class:"grid-wrap"},Z={__name:"QualityStandardList",setup(j){S.registerModules([C]);const V=z,b=r({title:"품질 기준 조회"}),h=R([{title:"품질",disabled:!0,href:"#"},{title:"품질 기준 조회",disabled:!1,href:"#"}]),n=r([]),i=r([]),g=r([{headerName:"기준명",field:"stdName",flex:1,suppressSizeToFit:!0},{headerName:"허용수치",field:"allowedValue",flex:1,suppressSizeToFit:!0}]),c=r([]),t=r({keyword:"",type:""}),k=async()=>{try{const a="http://localhost:3000/qstdlist",{data:e}=await Q.get(a),s=(e||[]).map(o=>({type:o.std_type??o.CODE_NAME??o.code_name,stdName:o.STD_NAME,allowedValue:o.ALLOWED_VALUE}));i.value=s,n.value=[...new Set(s.map(o=>o.type).filter(Boolean))],u()}catch(a){console.error("데이터 조회 중 오류:",a),i.value=[],n.value=[],c.value=[]}},u=()=>{let a=[...i.value];if(t.value.type&&(a=a.filter(e=>e.type===t.value.type)),t.value.keyword){const e=t.value.keyword.toLowerCase();a=a.filter(s=>(s.stdName||"").toLowerCase().includes(e))}c.value=a,p&&p.setGridOption("rowData",a)},x=r({defaultColDef:{resizable:!0,sortable:!0},pagination:!1,animateRows:!0});let p=null;const D=a=>{p=a.api};L(()=>{k()}),A(()=>t.value.type,()=>u());const w=()=>{u()},N=()=>{t.value.keyword="",t.value.type="",u()};return(a,e)=>(O(),B(q,null,[l(G,{title:b.value.title,breadcrumbs:h.value},null,8,["title","breadcrumbs"]),l(U,null,{default:d(()=>[f("div",I,[f("div",P,[l(T,null,{default:d(()=>[l(m,{cols:"3"},{default:d(()=>[l(E,{modelValue:t.value.keyword,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.keyword=s),label:"기준",onKeyup:F(w,["enter"]),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),l(m,{cols:"3"},{default:d(()=>[l(M,{modelValue:t.value.type,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.type=s),items:n.value,label:"제품 구분",density:"compact",clearable:""},null,8,["modelValue","items"])]),_:1}),l(m,{cols:"3"},{default:d(()=>[l(y,{class:"ml-2",color:"darkText",onClick:w},{default:d(()=>e[2]||(e[2]=[_("검색")])),_:1}),l(y,{class:"ml-2",onClick:N},{default:d(()=>e[3]||(e[3]=[_("초기화")])),_:1})]),_:1})]),_:1})])]),f("div",W,[l(v($),{theme:v(V),columnDefs:g.value,rowData:c.value,gridOptions:x.value,rowSelection:"single",onGridReady:D,style:{height:"420px",width:"100%"}},null,8,["theme","columnDefs","rowData","gridOptions"])])]),_:1})],64))}},ee=K(Z,[["__scopeId","data-v-3fa36de7"]]);export{ee as default};
