import{_ as U,a as g}from"./UiParentCard.vue_vue_type_script_setup_true_lang-BW8k9qJX.js";import{B as I}from"./main-CfRLyuEJ.js";import{O as t,_ as F,$ as x,P as O,q as $,o as z,a as l,d,w as s,V as C,b as u,a0 as c,a3 as P,a4 as b,f as M,e as D,A,a1 as Y,F as q}from"./index-BkOgXO0r.js";import{_ as Q}from"./NewModal-C5NqQFOW.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"radioDiv"},j={__name:"FailMaterialSelect",setup(G){const h=Y,i=t(null),v=t(""),p=t([]),_=t([]),T=[{field:"자재코드",headerName:"자재코드",flex:1},{field:"자재명",headerName:"자재명",flex:1},{field:"자재유형",headerName:"자재유형",flex:1},{field:"규격",headerName:"규격",flex:1},{field:"단위",headerName:"단위",flex:1}],N=t([]),E=async a=>{v.value=a,_.value=T;try{const e=await x.get("http://localhost:3000/materials");p.value=e.data.map(o=>({자재코드:o.MAT_CODE,자재명:o.MAT_NAME,자재유형:o.MAT_TYPE,규격:o.MAT_SIZE,단위:o.MAT_UNIT})),i.value&&i.value.open()}catch(e){console.error("자재 목록을 가져오는 중 오류가 발생했습니다:"+e),alert("자재 목록을 불러오는 데 실패했습니다.")}};function w(a){a&&(n.value=a.자재명,r.value=a.자재코드)}const y=t([{field:"입고번호",flex:1.5},{field:"자재명",flex:1},{field:"자재코드",flex:1},{field:"규격",flex:1},{field:"단위",flex:1},{field:"작성자",flex:1},{field:"불량품수량",flex:1},{field:"상태",flex:1,cellStyle:a=>a.value=="등록"?{color:"black",fontWeight:"bold"}:a.value=="완료"?{color:"red",fontWeight:"bold"}:null}]),V=t([]);F(async()=>{try{const a=await x.get("http://localhost:3000/failMaterials");V.value=a.data.map(e=>({입고번호:e.RECEIPT_NO,자재명:e.MAT_NAME,자재코드:e.MAT_CODE,자재유형:e.MAT_TYPE,규격:e.MAT_SIZE,단위:e.MAT_UNIT,작성자:e.CREATED_BY,불량품수량:e.TOTAL_QTY,상태:e.MAT_STATUS}))}catch(a){console.error("발주 조회 실패:",a)}});const R=t({title:"불량품"}),k=O([{title:"자재",disabled:!0,href:"#"},{title:"불량품 조회",disabled:!1,href:"#"}]),n=t(""),r=t(""),f=t(""),m=t("");function S(){n.value="",r.value="",f.value="",m.value=""}function B(){}return(a,e)=>(z(),$(q,null,[l(U,{title:R.value.title,breadcrumbs:k.value},null,8,["title","breadcrumbs"]),l(g,{title:"불량품 검색조건"},{default:s(()=>[l(C,{class:"mb-4"},{default:s(()=>[l(u,{cols:"3"},{default:s(()=>[l(c,{label:"자재명",modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=o=>n.value=o),placeholder:"자재명",dense:"",outlined:"",readonly:""},{"append-inner":s(()=>[d("i",{class:"fa-solid fa-magnifying-glass",style:{cursor:"pointer","font-size":"large","margin-right":"0.5rem"},onClick:e[0]||(e[0]=o=>E("불량품 조회",N.value,T))})]),_:1},8,["modelValue"])]),_:1}),l(u,{cols:"3"},{default:s(()=>[l(c,{label:"자재코드",modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=o=>r.value=o),placeholder:"자재코드",dense:"",outlined:"",readonly:""},null,8,["modelValue"])]),_:1}),l(u,{cols:"3"},{default:s(()=>[l(c,{label:"담당자",modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=o=>f.value=o),placeholder:"담당자",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),l(u,null,{default:s(()=>[d("div",Z,[e[5]||(e[5]=d("span",{class:"mr-2"},"상태:",-1)),l(P,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=o=>m.value=o),inline:"","hide-details":""},{default:s(()=>[l(b,{label:"등록",value:"등록"}),l(b,{label:"완료",value:"완료"})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),l(C,{justify:"center"},{default:s(()=>[l(M,{color:"error",class:"mr-2",onClick:S},{default:s(()=>e[6]||(e[6]=[D("초기화")])),_:1}),l(M,{color:"darkText",onClick:B},{default:s(()=>e[7]||(e[7]=[D("검색")])),_:1})]),_:1})]),_:1}),e[8]||(e[8]=d("div",{class:"div"},null,-1)),l(g,{title:"불량품 목록"},{default:s(()=>[l(A(I),{rowData:V.value,columnDefs:y.value,theme:A(h),style:{height:"24rem",width:"100%"},pagination:!0,"pagination-page-size":8,onCellValueChanged:a.onCellValueChanged},null,8,["rowData","columnDefs","theme","onCellValueChanged"]),l(Q,{ref_key:"modalRef",ref:i,title:v.value,rowData:p.value,colDefs:_.value,onConfirm:w},null,8,["title","rowData","colDefs"])]),_:1})],64))}},ee=W(j,[["__scopeId","data-v-d0b22519"]]);export{ee as default};
