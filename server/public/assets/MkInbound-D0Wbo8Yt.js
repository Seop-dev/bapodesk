import{_ as P,a as V}from"./UiParentCard.vue_vue_type_script_setup_true_lang-BW8k9qJX.js";import{O as i,P as y,_ as O,$ as d,q as A,o as k,a as l,w as r,d as o,a0 as _,f as c,e as D,A as E,a1 as I,V as S,F as L}from"./index-BkOgXO0r.js";import{B as M}from"./main-CfRLyuEJ.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"d-flex align-center mb-4"},N={class:"main-container"},Y={class:"list-container"},F={__name:"MkInbound",setup(H){const m=i(null),b=a=>{m.value=a.api},T=I,g=new Date().toISOString().split("T")[0],s=i({startDate:g,endDate:""}),u=i([]),C=i([{headerCheckboxSelection:!0,checkboxSelection:!0,width:50},{field:"검사번호",flex:1},{field:"검사일자",flex:1},{field:"제품코드",flex:1},{field:"제품명",flex:1},{field:"제품유형",flex:1},{field:"수량",flex:.7}]),p=i({title:"입고 및 LOT번호등록"}),v=y([{title:"영업",disabled:!0,href:"#"},{title:"제품 입출고",disabled:!0,href:"#"},{title:"입고 및 LOT번호등록",disabled:!1,href:"#"}]);O(()=>{f()});const f=async()=>{const a=await d.get("http://localhost:3000/inboundList");console.log(a),u.value=a.data.map(e=>{var t;return{검사번호:e.PRD_CERT_ID,제품코드:e.PRD_CODE,제품명:e.PRD_NAME,제품유형:e.PRD_TYPE,검사일자:e.Q_CHECKED_DATE instanceof Date?e.Q_CHECKED_DATE.toISOString().substring(0,10):((t=e.Q_CHECKED_DATE)==null?void 0:t.substring(0,10))||"",수량:e.TOTAL_QTY}})},x=async()=>{const a=m.value.getSelectedRows();if(a.length===0){alert("입고할 제품을 선택하세요");return}console.log(a);const e=a.map(n=>({RECEIVED_QTY:n.수량,PRD_CERT_ID:n.검사번호,PRD_CODE:n.제품코드,PRD_NAME:n.제품명,PRD_TYPE:n.제품유형})),t=await d.post("http://localhost:3000/inboundInsert",e);console.log(t),alert("등록완료")},R=async()=>{const a={startDate:s.value.startDate,endDate:s.value.endDate};if(!s.value.startDate){alert("날짜를 올바르게 선택하세요.");return}const e=await d.post("http://localhost:3000/inboundSearch",a);u.value=e.data.map(t=>({검사번호:t.PRD_CERT_ID,제품코드:t.PRD_CODE,제품유형:t.PRD_TYPE,제품명:t.PRD_NAME,검사일자:t.Q_CHECKED_DATE.substring(0,10),수량:t.TOTAL_QTY}))},h=a=>{console.log(a.value),console.log(u.value)},w=()=>{s.value={startDate:"",endDate:""},f()};return(a,e)=>(k(),A(L,null,[l(P,{title:p.value.title,breadcrumbs:v.value},null,8,["title","breadcrumbs"]),l(V,null,{default:r(()=>[e[7]||(e[7]=o("h5",null,"입고 및 LOT생성",-1)),o("div",B,[l(_,{label:"검사 일자",type:"date",modelValue:s.value.startDate,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.startDate=t),"hide-details":"",class:"mr-2",style:{"max-width":"180px"}},null,8,["modelValue"]),l(_,{label:"검사 일자",type:"date",modelValue:s.value.endDate,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.endDate=t),"hide-details":"",class:"mr-2",style:{"max-width":"180px"}},null,8,["modelValue"]),l(c,{color:"darkText",onClick:R},{default:r(()=>e[2]||(e[2]=[D("검색")])),_:1}),l(c,{color:"error",class:"ml-3",onClick:w},{default:r(()=>e[3]||(e[3]=[D("초기화")])),_:1})]),o("div",N,[o("div",Y,[l(E(M),{rowData:u.value,columnDefs:C.value,theme:E(T),style:{height:"550px",width:"100%"},onCellValueChanged:h,onGridReady:b,rowSelection:"single",pagination:!0,"pagination-page-size":20},null,8,["rowData","columnDefs","theme"]),e[5]||(e[5]=o("br",null,null,-1)),e[6]||(e[6]=o("br",null,null,-1)),l(S,{justify:"end"},{default:r(()=>[l(c,{color:"primary",class:"mr-6",onClick:x},{default:r(()=>e[4]||(e[4]=[D("LOT번호등록")])),_:1})]),_:1})])])]),_:1})],64))}},G=Q(F,[["__scopeId","data-v-48e55d37"]]);export{G as default};
