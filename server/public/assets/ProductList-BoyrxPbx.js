import{O as d,aZ as $,a_ as q,P as z,b6 as F,y as K,q as S,o as U,a as l,w as r,d as H,V as _,b as n,f as b,e as y,a0 as u,A as N,a1 as Y,F as j,$ as G,H as W}from"./index-BkOgXO0r.js";import{_ as Z,a as J}from"./UiParentCard.vue_vue_type_script_setup_true_lang-BW8k9qJX.js";import{B as X}from"./main-CfRLyuEJ.js";import{_ as ee}from"./NewModal-C5NqQFOW.js";const de={__name:"ProductList",setup(ae){const i=d(null),c=d(""),f=d([]),D=d([]),h=[{field:"검사번호",headerName:"검사번호",flex:1.2},{field:"제품코드",headerName:"제품코드",flex:1},{field:"제품명",headerName:"제품명",flex:.8},{field:"검사완료일자",headerName:"검사완료일자",flex:.8},{field:"제품유형",headerName:"제품유형",flex:.6}],g=d([{검사번호:"QC100",제품코드:"DSK100",제품명:"흰색학생책상",검사완료일자:"2025-08-12",제품유형:"완제품"},{검사번호:"QC101",제품코드:"DSK101",제품명:"검은색학생책상",검사완료일자:"2025-08-12",제품유형:"반제품"}]),V=(a,e,o)=>{c.value=a,f.value=e,D.value=o,i.value&&i.value.open()};function T(a){t.value.prdType=a.제품유형,t.value.chkedDate=a.검사완료일자,t.value.certId=a.검사번호,t.value.prdName=a.제품명,m.value.push({검사번호:a.검사번호,제품코드:a.제품코드,제품명:a.제품명,검사완료일자:a.검사완료일자,제품유형:a.제품유형})}$.registerModules([q]);const k=Y,P=W(),E=d({title:"제품검사성적서 조회"}),w=z([{title:"품질",disabled:!0,href:"#"},{title:"제품성적서조회",disabled:!1,href:"#"}]),t=d({prdType:"",chkedDate:"",certId:"",prdName:""}),x=async()=>{try{const a=await G.get("http://localhost:3000/prdcertlist");a.data.length>0&&(m.value=a.data.map(e=>({certId:e.PRD_CERT_ID,prdCode:e.PRD_CODE,prdName:e.PRD_NAME,chkedDate:e.Q_CHECKED_DATE.substring(0,10),prdType:e.PRD_TYPE})))}catch(a){console.error("데이터 로딩 실패:",a.message)}};F(()=>{x()});const v=d([{headerName:"검사번호",field:"certId"},{headerName:"제품코드",field:"prdCode"},{headerName:"제품명",field:"prdName"},{headerName:"검사완료일자",field:"chkedDate"},{headerName:"제품유형",field:"prdType"}]),m=d([]),I=K(()=>{const a=(t.value.chkedDate||"").trim(),e=(t.value.certId||"").trim().toLowerCase(),o=(t.value.prdName||"").trim().toLowerCase(),C=(t.value.prdType||"").trim().toLowerCase(),p=s=>(s??"").toString().toLowerCase().trim();return m.value.filter(s=>{const B=!a||(s.chkedDate??"").includes(a),L=!e||p(s.certId).includes(e),O=!o||p(s.prdName).includes(o),Q=!C||p(s.prdType).includes(C);return B&&L&&O&&Q})}),R=d({defaultColDef:{flex:1,minWidth:100,resizable:!0},columnDefs:v,pagination:!0,paginationAutoPageSize:!0}),M=a=>{const e=a.data;console.log("클릭된 행:",e),P.push({path:"/qm/prdlstdtl",query:{certId:e.PRD_CERT_ID,prdCode:e.PRD_CODE,prdName:e.PRD_NAME,chkedDate:e.Q_CHECKED_DATE,prdType:e.PRD_TYPE}})},A=()=>{const a=t.value;a.chkedDate="",a.certId="",a.prdName="",a.prdType=""};return(a,e)=>(U(),S(j,null,[l(Z,{title:E.value.title,breadcrumbs:w.value},null,8,["title","breadcrumbs"]),l(J,null,{default:r(()=>[l(_,{class:"mb-4",justify:"space-between",align:"center"},{default:r(()=>[l(n,{cols:"auto"},{default:r(()=>[l(b,{color:"warning",class:"mr-2 button",onClick:e[0]||(e[0]=o=>V("제품유형",g.value,h))},{default:r(()=>e[5]||(e[5]=[y("제품조회 ")])),_:1})]),_:1}),l(n,null,{default:r(()=>[l(b,{color:"error",class:"top_btn_ser",variant:"elevated",onClick:A},{default:r(()=>e[6]||(e[6]=[y("초기화")])),_:1})]),_:1}),l(ee,{ref_key:"modalRef",ref:i,title:c.value,rowData:f.value,colDefs:D.value,onConfirm:T},null,8,["title","rowData","colDefs"])]),_:1}),l(_,{class:"mb-4"},{default:r(()=>[l(n,{cols:"3"},{default:r(()=>[l(u,{label:"제품유형",modelValue:t.value.prdType,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.prdType=o),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),l(n,{cols:"3"},{default:r(()=>[l(u,{label:"검사완료일자",modelValue:t.value.chkedDate,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.chkedDate=o),type:"date",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),l(n,{cols:"3"},{default:r(()=>[l(u,{label:"검사번호",modelValue:t.value.certId,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.certId=o),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),l(n,{cols:"3"},{default:r(()=>[l(u,{label:"제품명",modelValue:t.value.prdName,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.prdName=o),dense:"",outlined:""},null,8,["modelValue"])]),_:1})]),_:1}),e[7]||(e[7]=H("br",null,null,-1)),l(N(X),{rowData:I.value,columnDefs:v.value,theme:N(k),gridOptions:R.value,onRowClicked:M,style:{height:"400px"}},null,8,["rowData","columnDefs","theme","gridOptions"])]),_:1})],64))}};export{de as default};
