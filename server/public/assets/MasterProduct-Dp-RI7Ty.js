import{_ as Y,a as Z}from"./UiParentCard.vue_vue_type_script_setup_true_lang-BW8k9qJX.js";import{O as d,P as j,_ as q,$ as n,q as G,o as K,a as o,w as s,d as r,a0 as i,f as c,e as f,V as R,A as g,a1 as H,b as u,a2 as b,F as J}from"./index-BkOgXO0r.js";import{B as X}from"./main-CfRLyuEJ.js";import{_ as ee}from"./NewModal-C5NqQFOW.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";const le={class:"d-flex align-center mb-4"},te={class:"main-container"},oe={class:"list-container"},se={class:"form-wrapper"},de={class:"add"},ue={__name:"MasterProduct",setup(ne){const C=H,N=d({mode:"multiRow"}),h=new Date().toISOString().split("T")[0],a=d({prdCode:"",prdName:"",writer:"",date:h,size:"",safeQT:"",unit:"",type:"",note:""}),S=d({title:"제품 관리"}),U=j([{title:"기준정보",disabled:!0,href:"#"},{title:"제품 관리",disabled:!1,href:"#"}]);q(()=>{m(),$(),I(),x()});const v=d([]),A=d([{field:"제품코드",editable:!0,width:140},{field:"제품명",width:140,editable:!0},{field:"제품유형",width:140,editable:!0},{field:"규격",width:140,editable:!0},{field:"단위",width:130,editable:!0},{field:"안전재고",width:110},{field:"작성자",width:110},{field:"등록일자",width:110},{field:"비고",width:110}]),m=async()=>{const l=await n.get("http://localhost:3000/masterPrdSelect");console.log(l),v.value=l.data.map(e=>({제품코드:e.PRD_CODE,제품명:e.PRD_NAME,제품유형:e.PRD_TYPE,규격:e.PRD_SIZE,단위:e.PRD_UNIT,안전재고:e.PRD_SAFEQT,작성자:e.PRD_WRITER,등록일자:e.PRD_DATE.substring(0,10),비고:e.PRD_NOTE}))},_=d([]),w=d([]),I=async()=>{const l=await n.get("http://localhost:3000/masterPrdUnit");_.value=l.data.map(e=>e.code_name)},x=async()=>{const l=await n.get("http://localhost:3000/masterPrdType");w.value=l.data.map(e=>e.code_name)},M=async()=>{if(console.log(!a.value.prdCode),a.value.prdCode){const l={PRD_NAME:a.value.prdName,PRD_TYPE:a.value.type,PRD_UNIT:a.value.unit,PRD_SIZE:a.value.size,PRD_SAFEQT:a.value.safeQT,PRD_WRITER:a.value.writer,PRD_DATE:a.value.date,PRD_NOTE:a.value.note,PRD_CODE:a.value.prdCode},e=await n.post("http://localhost:3000/masterPrdUpdate",l);console.log(e.config.data),m()}else{if(!a.value.safeQT||!a.value.type){alert("값을 올바르게 기재하십시오.");return}const l={PRD_NAME:a.value.prdName,PRD_TYPE:a.value.type,PRD_UNIT:a.value.unit,PRD_SIZE:a.value.size,PRD_SAFEQT:a.value.safeQT,PRD_WRITER:a.value.writer,PRD_DATE:a.value.date,PRD_NOTE:a.value.note},e=await n.post("http://localhost:3000/masterPrdInsert",l);console.log(e.config.data),m()}},P=d(null),Q=l=>{P.value=l.api},k=async()=>{const l=P.value.getSelectedRows();if(l.length===0){alert("삭제할 제품을 선택하세요.");return}confirm(`${a.value.prdName}을 삭제하시겠습니까?`);const e=l.map(t=>t.제품코드);await n.post("http://localhost:3000/masterPrdDelete",{prdCode:e}),await m()},p=d(""),O=async()=>{const l={PRD_NAME:p.value},e=await n.post("http://localhost:3000/masterPrdSearch",l);v.value=await e.data.map(t=>({제품코드:t.PRD_CODE,제품명:t.PRD_NAME,제품유형:t.PRD_TYPE,규격:t.PRD_SIZE,단위:t.PRD_UNIT,안전재고:t.PRD_SAFEQT,작성자:t.PRD_WRITER,등록일자:t.PRD_DATE.substring(0,10),비고:t.PRD_NOTE}))},z=()=>{a.value={empName:"",addDate:"",empNo:"",diagram:""}},F=l=>{a.value.prdCode=l.data.제품코드,a.value.prdName=l.data.제품명,a.value.writer=l.data.작성자,a.value.date=l.data.등록일자,a.value.safeQT=l.data.안전재고,a.value.size=l.data.규격,a.value.unit=l.data.단위,a.value.type=l.data.제품유형,a.value.note=l.data.비고},D=d(null),V=d(""),T=d([]),y=d([]),B=[{field:"그룹코드",headerName:"그룹코드",flex:1},{field:"규격",headerName:"규격",flex:1},{field:"사용유무",headerName:"사용유무",flex:1}],E=d([]),$=async()=>{const l=await n.get("http://localhost:3000/masterPrdModal");E.value=l.data.map(e=>({그룹코드:e.group_code,규격:e.code_name,사용유무:e.use_yn})),console.log(l)},L=async(l,e,t)=>{V.value=l,T.value=e,y.value=t,D.value&&D.value.open()},W=async l=>{a.value.size=l.규격};return(l,e)=>(K(),G(J,null,[o(Y,{title:S.value.title,breadcrumbs:U.value},null,8,["title","breadcrumbs"]),o(Z,{title:"제품 목록"},{default:s(()=>[r("div",le,[o(i,{label:"제품 검색",modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=t=>p.value=t),"hide-details":"",class:"mr-2",style:{"max-width":"280px"}},null,8,["modelValue"]),o(c,{color:"darkText",onClick:O},{default:s(()=>e[11]||(e[11]=[f("검색")])),_:1}),o(R,{justify:"end",class:"mr-3"},{default:s(()=>[o(c,{color:"error",class:"mr-1",onClick:k},{default:s(()=>e[12]||(e[12]=[f("삭제")])),_:1})]),_:1})]),r("div",te,[r("div",oe,[o(g(X),{rowData:v.value,columnDefs:A.value,theme:g(C),style:{height:"500px",width:"100%"},onCellValueChanged:l.onCellValueChanged,rowSelection:N.value,onRowClicked:F,onGridReady:Q},null,8,["rowData","columnDefs","theme","onCellValueChanged","rowSelection"])]),r("div",se,[r("div",de,[o(R,{class:"mb-4"},{default:s(()=>[o(u,{cols:"6"},{default:s(()=>[o(i,{label:"제품코드",modelValue:a.value.prdCode,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.prdCode=t),readonly:"true",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),o(u,{cols:"6"},{default:s(()=>[o(i,{label:"제품명",modelValue:a.value.prdName,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.prdName=t),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),o(u,{cols:"6"},{default:s(()=>[o(i,{label:"작성자",modelValue:a.value.writer,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.writer=t),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),o(u,{cols:"6"},{default:s(()=>[o(i,{label:"등록일자",modelValue:a.value.date,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.date=t),type:"date",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),o(u,{cols:"6"},{default:s(()=>[o(i,{label:"규격",modelValue:a.value.size,"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.size=t),placeholder:"규격",dense:"",outlined:"",readonly:""},{"append-inner":s(()=>[r("i",{class:"fa-solid fa-magnifying-glass",style:{cursor:"pointer","font-size":"large","margin-right":"0.5rem"},onClick:e[5]||(e[5]=t=>L("제품 규격 조회",E.value,B))})]),_:1},8,["modelValue"]),o(ee,{ref_key:"modalRef",ref:D,title:V.value,rowData:T.value,colDefs:y.value,onConfirm:W},null,8,["title","rowData","colDefs"])]),_:1}),o(u,{cols:"6"},{default:s(()=>[o(i,{label:"안전재고",modelValue:a.value.safeQT,"onUpdate:modelValue":e[7]||(e[7]=t=>a.value.safeQT=t),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),o(u,{cols:"6"},{default:s(()=>[o(b,{label:"단위",modelValue:a.value.unit,"onUpdate:modelValue":e[8]||(e[8]=t=>a.value.unit=t),items:_.value,dense:"",outlined:""},null,8,["modelValue","items"])]),_:1}),o(u,{cols:"6"},{default:s(()=>[o(b,{label:"제품유형",modelValue:a.value.type,"onUpdate:modelValue":e[9]||(e[9]=t=>a.value.type=t),items:w.value,dense:"",outlined:""},null,8,["modelValue","items"])]),_:1}),o(u,{cols:"12"},{default:s(()=>[o(i,{label:"비고",modelValue:a.value.note,"onUpdate:modelValue":e[10]||(e[10]=t=>a.value.note=t),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),o(R,{justify:"center"},{default:s(()=>[o(c,{color:"error",class:"mr-3",onClick:z},{default:s(()=>e[13]||(e[13]=[f("초기화")])),_:1}),o(c,{color:"primary",class:"mr-6",onClick:M},{default:s(()=>e[14]||(e[14]=[f("저장")])),_:1})]),_:1})]),_:1})]),e[15]||(e[15]=r("br",null,null,-1))])])]),_:1})],64))}},ve=ae(ue,[["__scopeId","data-v-0d7ae57d"]]);export{ve as default};
